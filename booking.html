<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Boutique Sal√≥n | Reservar turno</title>

  <style>
    :root {
      --color-primary: #d63384;
      --color-primary-soft: rgba(214,51,132,0.12);
      --color-card-bg: rgba(255,255,255,0.9);
      --color-card-border: rgba(255,255,255,0.7);
      --color-dark: #2b2b2b;
      --color-text: #444;
      --radius-card: 18px;
      --radius-btn: 10px;
      --shadow-card: 0 28px 48px rgba(0,0,0,.5);
      --border-light: 1px solid rgba(255,255,255,.7);
      --font-stack: "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    }

    * {
      box-sizing: border-box;
      -webkit-font-smoothing: antialiased;
    }

    body {
      margin: 0;
      font-family: var(--font-stack);
      color: var(--color-text);
      line-height: 1.4;
      padding: 2rem 1rem 6rem;
      display: flex;
      justify-content: center;

      background:
        radial-gradient(circle at 20% 20%, rgba(0,0,0,0.35) 0%, rgba(0,0,0,0.6) 60%, rgba(0,0,0,0.7) 100%),
        url("./img/bg-booking.jpg");
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
    }

    .app-shell {
      width: 100%;
      max-width: 1200px;
      display: grid;
      grid-template-columns: 1fr 380px;
      gap: 2rem;
    }
    @media (max-width: 900px) {
      .app-shell {
        grid-template-columns: 1fr;
      }
    }

    /* HERO / CABECERA */
    .hero-card {
      background: var(--color-card-bg);
      backdrop-filter: blur(10px);
      border-radius: var(--radius-card);
      border: var(--border-light);
      box-shadow: var(--shadow-card);
      padding: 1.5rem 1.5rem 1rem;
      margin-bottom: 1.5rem;
    }

    .brand-row {
      display: flex;
      flex-wrap: wrap;
      align-items: flex-start;
      justify-content: space-between;
      gap: 1rem;
    }
    .brand-left { min-width: 200px; }

    .brand-name {
      font-size: 1.4rem;
      font-weight: 600;
      color: var(--color-dark);
      letter-spacing: -0.03em;
    }
    .brand-sub {
      font-size: 0.9rem;
      color: var(--color-primary);
      font-weight: 500;
    }
    .slogan {
      margin-top: .75rem;
      font-size: 0.95rem;
      line-height: 1.4;
      color: var(--color-dark);
      font-weight: 500;
    }

    .pill-security {
      display: flex;
      align-items: center;
      gap: .5rem;
      background: var(--color-primary-soft);
      color: var(--color-primary);
      font-size: .8rem;
      font-weight: 500;
      border-radius: 999px;
      padding: .5rem .9rem;
      border: 1px solid rgba(214,51,132,.3);
      box-shadow: 0 20px 40px rgba(214,51,132,.4);
      line-height: 1.2;
    }

    /* CARD FLUJO */
    .flow-card {
      background: var(--color-card-bg);
      border-radius: var(--radius-card);
      border: var(--border-light);
      box-shadow: var(--shadow-card);
      padding: 1.5rem;
      backdrop-filter: blur(10px);
    }

    .flow-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: .5rem;
    }
    .flow-title {
      font-size: 1rem;
      font-weight: 600;
      color: var(--color-dark);
      letter-spacing: -0.03em;
      display: flex;
      align-items: center;
      gap: .5rem;
    }

    .step-indicator { display: flex; gap: .4rem; }
    .step-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: rgba(214,51,132,.25);
      border: 1px solid rgba(214,51,132,.6);
    }
    .step-dot.active {
      background: var(--color-primary);
      border-color: var(--color-primary);
      box-shadow: 0 0 12px rgba(214,51,132,.9);
    }

    hr.line {
      border: 0;
      border-top: 1px solid rgba(214,51,132,.3);
      margin: 1rem 0 1.5rem;
    }

    /* SERVICIOS GRID */
    .services-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(min(240px,100%),1fr));
      gap: 1rem;
    }

    .service-card {
      border-radius: var(--radius-card);
      border: var(--border-light);
      background: rgba(255,255,255,0.95);
      box-shadow: var(--shadow-card);
      padding: 1rem 1rem 0.9rem;
      cursor: pointer;
      position: relative;
      transition: all .15s;
    }
    .service-card:hover {
      box-shadow: 0 24px 40px rgba(214,51,132,.45);
      transform: translateY(-2px);
    }

    .service-header-row {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: .5rem;
      flex-wrap: wrap;
      gap: .5rem;
    }

    .service-name {
      font-weight: 600;
      font-size: .95rem;
      color: var(--color-dark);
      letter-spacing: -0.03em;
    }

    .badge-price {
      background: var(--color-primary);
      color: #fff;
      font-size: .8rem;
      font-weight: 600;
      border-radius: 999px;
      padding: .35rem .6rem;
      line-height: 1.2;
      white-space: nowrap;
      box-shadow: 0 16px 32px rgba(214,51,132,.4);
    }

    .service-desc {
      font-size: .8rem;
      line-height: 1.45;
      color: var(--color-text);
      min-height: 3em;
    }

    .service-meta-row {
      display: flex;
      justify-content: space-between;
      margin-top: .75rem;
      font-size: .75rem;
      color: var(--color-text);
      flex-wrap: wrap;
      gap: .5rem;
    }

    .mini-label {
      font-weight: 500;
      color: var(--color-dark);
    }

    .choose-btn {
      border: none;
      background: var(--color-primary);
      color: #fff;
      font-size: .8rem;
      font-weight: 600;
      width: 100%;
      border-radius: var(--radius-btn);
      padding: .7rem .9rem;
      margin-top: 1rem;
      box-shadow: 0 16px 32px rgba(214,51,132,.4);
      cursor: pointer;
      line-height: 1.2;
      transition: box-shadow .15s, transform .15s;
    }
    .choose-btn:hover {
      transform: translateY(-1px) scale(1.01);
    }

    /* PASO 2 FECHA/HORA */
    .hidden { display: none !important; }

    .calendar-wrap {
      display: grid;
      gap: 1rem;
      grid-template-columns: 1fr 1fr;
    }
    @media (max-width:600px){
      .calendar-wrap { grid-template-columns: 1fr; }
    }

    .date-select-card,
    .time-select-card {
      border-radius: var(--radius-card);
      border: var(--border-light);
      background: rgba(255,255,255,0.95);
      box-shadow: var(--shadow-card);
      padding: 1rem;
    }

    .block-title {
      font-size: .9rem;
      font-weight: 600;
      color: var(--color-dark);
      margin-bottom: .75rem;
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      gap:.5rem;
    }

    .date-input,
    .time-slot-btn,
    .input-field {
      font-family: inherit;
      font-size: .9rem;
    }

    .date-input {
      width: 100%;
      padding: .7rem .8rem;
      border-radius: var(--radius-btn);
      border: 1px solid rgba(214,51,132,.4);
      outline: none;
      color: var(--color-dark);
      background:#fff;
      line-height:1.2;
    }

    .times-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit,minmax(min(90px,100%),1fr));
      gap: .5rem;
    }

    .time-slot-btn {
      border-radius: var(--radius-btn);
      border: 1px solid rgba(214,51,132,.4);
      background:#fff;
      color: var(--color-dark);
      padding: .6rem .5rem;
      font-size: .8rem;
      font-weight: 500;
      cursor: pointer;
      line-height:1.2;
      text-align:center;
    }
    .time-slot-btn.active {
      background: var(--color-primary);
      color: #fff;
      border-color: var(--color-primary);
      box-shadow: 0 16px 32px rgba(214,51,132,.4);
    }

    .small-hint {
      font-size: .7rem;
      line-height:1.4;
      color: #666;
      margin-top: .4rem;
    }

    /* PASO 3 CLIENTA */
    .client-card {
      border-radius: var(--radius-card);
      border: var(--border-light);
      background: rgba(255,255,255,0.95);
      box-shadow: var(--shadow-card);
      padding: 1rem;
      margin-top: 1rem;
    }

    .input-label {
      font-size: .8rem;
      font-weight: 500;
      color: var(--color-dark);
      margin-bottom: .4rem;
      display:block;
    }

    .input-field {
      width: 100%;
      padding: .7rem .8rem;
      border-radius: var(--radius-btn);
      border: 1px solid rgba(214,51,132,.4);
      outline: none;
      color: var(--color-dark);
      background:#fff;
      line-height:1.2;
    }

    .confirm-btn {
      border: none;
      background: var(--color-primary);
      color: #fff;
      font-size: .9rem;
      font-weight: 600;
      width: 100%;
      border-radius: var(--radius-btn);
      padding: .8rem 1rem;
      margin-top: 1rem;
      box-shadow: 0 16px 32px rgba(214,51,132,.4);
      cursor: pointer;
      line-height: 1.2;
      transition: box-shadow .15s, transform .15s;
    }
    .confirm-btn:hover {
      transform: translateY(-1px) scale(1.01);
    }

    /* PASO 4 FINAL */
    .final-card {
      border-radius: var(--radius-card);
      border: var(--border-light);
      background: rgba(255,255,255,0.95);
      box-shadow: var(--shadow-card);
      padding: 1rem;
      margin-top: 1rem;
    }

    .summary-line {
      font-size: .8rem;
      margin-bottom: .5rem;
      line-height:1.4;
    }
    .summary-strong {
      color: var(--color-dark);
      font-weight: 600;
    }

    .deposit-box {
      border-radius: var(--radius-card);
      background: var(--color-primary-soft);
      border: 1px solid rgba(214,51,132,.3);
      box-shadow: 0 24px 40px rgba(214,51,132,.4);
      padding: .9rem 1rem;
      margin-top: 1rem;
      font-size: .8rem;
      line-height:1.5;
      color: var(--color-dark);
    }

    .pay-btn {
      display: inline-block;
      text-align: center;
      text-decoration: none;
      background: var(--color-primary);
      color:#fff;
      font-size:.9rem;
      font-weight:600;
      border-radius: var(--radius-btn);
      padding:.8rem 1rem;
      width:100%;
      box-shadow:0 16px 32px rgba(214,51,132,.4);
      margin-top:1rem;
    }

    .whatsapp-preview {
      background:#000;
      color:#0f0;
      font-family: ui-monospace, SFMono-Regular, Consolas, monospace;
      font-size:.7rem;
      line-height:1.4;
      border-radius: var(--radius-card);
      padding:1rem;
      margin-top:1rem;
      white-space:pre-wrap;
      word-break:break-word;
      border:2px solid #0f0;
      box-shadow:0 20px 40px rgba(0,255,0,.25);
    }

    /* PANEL DERECHA */
    .side-panel {
      position: relative;
      background: var(--color-card-bg);
      border-radius: var(--radius-card);
      border: var(--border-light);
      box-shadow: var(--shadow-card);
      backdrop-filter: blur(10px);
      padding:1.25rem 1.25rem 5rem;
      display:flex;
      flex-direction:column;
      gap:1rem;
      min-height:320px;
    }

    .side-title {
      font-size:.9rem;
      font-weight:600;
      color:var(--color-dark);
      letter-spacing:-0.03em;
      display:flex;
      justify-content:space-between;
      flex-wrap:wrap;
      gap:.5rem;
    }

    .side-summary-line {
      font-size:.8rem;
      line-height:1.4;
      color:var(--color-text);
      display:flex;
      justify-content:space-between;
      flex-wrap:wrap;
      gap:.5rem;
    }

    .side-hint {
      font-size:.7rem;
      color:#666;
      line-height:1.4;
    }

    .footer-note {
      font-size:.7rem;
      line-height:1.4;
      color:#555;
      text-align:center;
      margin-top:auto;
    }
  </style>
</head>

<body>
  <main class="app-shell">

    <!-- Columna Izquierda -->
    <section>
      <!-- HERO -->
      <article class="hero-card">
        <div class="brand-row">
          <div class="brand-left">
            <div class="brand-name">Boutique Sal√≥n</div>
            <div class="brand-sub">Agenda oficial con se√±a</div>
            <div class="slogan">
              Tu turno en 2 clics. Tu se√±a pagada. Tu agenda asegurada.
            </div>
          </div>

          <div class="pill-security">
            <span>üíñ</span>
            <span>
              Sin se√±a no se confirma. Pag√°s por Mercado Pago / Ual√° / Brubank / Naranja,
              y tu horario queda bloqueado s√≥lo para vos.
            </span>
          </div>
        </div>
      </article>

      <!-- FLUJO -->
      <article class="flow-card">

        <header class="flow-header">
          <div class="flow-title">
            <span id="flowTitleText">Paso 1 ¬∑ Eleg√≠ tu servicio</span>
          </div>

          <div class="step-indicator">
            <div class="step-dot step-dot-1 active"></div>
            <div class="step-dot step-dot-2"></div>
            <div class="step-dot step-dot-3"></div>
            <div class="step-dot step-dot-4"></div>
          </div>
        </header>

        <hr class="line" />

        <!-- PASO 1 -->
        <section id="step1_services">
          <div class="services-grid" id="servicesGrid"></div>
        </section>

        <!-- PASO 2 -->
        <section id="step2_datetime" class="hidden">
          <div class="calendar-wrap">
            <div class="date-select-card">
              <div class="block-title">
                <span>Eleg√≠ la fecha</span>
                <small id="chosenServiceLabel" style="font-size:.7rem;color:var(--color-primary);font-weight:600;"></small>
              </div>
              <input id="dateInput" class="date-input" type="date" />
              <div class="small-hint">
                S√≥lo mostramos los horarios libres ese d√≠a.
              </div>
            </div>

            <div class="time-select-card">
              <div class="block-title">
                <span>Horarios disponibles</span>
                <small style="font-size:.7rem;color:#666;font-weight:500;">Eleg√≠ uno</small>
              </div>
              <div class="times-grid" id="timesGrid"></div>
            </div>
          </div>
        </section>

        <!-- PASO 3 -->
        <section id="step3_client" class="hidden">
          <div class="client-card">
            <label class="input-label" for="clientName">Tu nombre</label>
            <input id="clientName" class="input-field" placeholder="Ej: Sof√≠a Gonz√°lez" />

            <label class="input-label" for="clientPhone" style="margin-top:1rem;">Tu WhatsApp</label>
            <input id="clientPhone" class="input-field" placeholder="Ej: +54 9 341 555 0000" />

            <div class="small-hint">
              Te confirmamos tu turno y te recordamos el d√≠a anterior üíï
            </div>

            <button class="confirm-btn" id="btnConfirmClient">
              Confirmar mis datos
            </button>
          </div>
        </section>

        <!-- PASO 4 -->
        <section id="step4_done" class="hidden">
          <div class="final-card">
            <div class="summary-line">
              <span class="summary-strong">Servicio:</span>
              <span id="sumServicio"></span>
            </div>

            <div class="summary-line">
              <span class="summary-strong">Profesional:</span>
              <span id="sumPro"></span>
            </div>

            <div class="summary-line">
              <span class="summary-strong">Fecha y hora:</span>
              <span id="sumFechaHora"></span>
            </div>

            <div class="summary-line">
              <span class="summary-strong">Tu nombre:</span>
              <span id="sumNombre"></span>
            </div>

            <div class="summary-line">
              <span class="summary-strong">Tu WhatsApp:</span>
              <span id="sumTel"></span>
            </div>

            <div class="deposit-box">
              Para asegurar este turno necesit√°s abonar tu se√±a:
              <div style="font-size:1rem;font-weight:600;color:var(--color-primary);margin-top:.4rem;" id="sumSena"></div>

              <div style="font-size:.7rem;color:#444;margin-top:.5rem;line-height:1.4;">
                Pag√°s ahora por Mercado Pago / Ual√° / Brubank / Naranja.
                Ese horario queda bloqueado exclusivamente para vos ü©∑
              </div>
            </div>

            <a class="pay-btn" id="payBtn" href="#" target="_blank" rel="noopener noreferrer">
              Pagar mi se√±a ahora
            </a>

            <div class="small-hint" style="margin-top:1rem;color:#666;">
              Guard√° tu comprobante. Si la se√±a no se acredita, el turno se libera autom√°ticamente.
            </div>

            <div class="whatsapp-preview" id="waPreview"></div>
          </div>
        </section>

      </article>
    </section>

    <!-- Columna Derecha -->
    <aside class="side-panel">
      <div class="side-title">
        <span>Resumen en vivo</span>
        <span style="font-size:.7rem;color:var(--color-primary);font-weight:600;">Boutique Sal√≥n</span>
      </div>

      <div class="side-summary-line">
        <span>Servicio</span>
        <span id="liveServicio">‚Äî</span>
      </div>

      <div class="side-summary-line">
        <span>Profesional</span>
        <span id="livePro">‚Äî</span>
      </div>

      <div class="side-summary-line">
        <span>Se√±a requerida</span>
        <span id="liveSena">‚Äî</span>
      </div>

      <div class="side-summary-line">
        <span>Fecha</span>
        <span id="liveFecha">‚Äî</span>
      </div>

      <div class="side-summary-line">
        <span>Hora</span>
        <span id="liveHora">‚Äî</span>
      </div>

      <div class="side-summary-line">
        <span>Nombre</span>
        <span id="liveNombre">‚Äî</span>
      </div>

      <div class="side-summary-line">
        <span>WhatsApp</span>
        <span id="liveTel">‚Äî</span>
      </div>

      <div class="side-hint">
        Si la clienta no paga la se√±a en unos minutos, el turno se libera solo.
      </div>

      <div class="footer-note">
        Boutique Sal√≥n ¬∑ Turnos con se√±a üíñ
      </div>
    </aside>

  </main>

  <script>
    // -------------------------
    // DATA DE SERVICIOS
    // -------------------------
    const servicios = [
      {
        id: "unas_esculpidas",
        nombre: "U√±as esculpidas",
        desc: "U√±as definidas, resistentes, terminaci√≥n prolija y elegante.",
        duracion: "60 min",
        profesional: "Carla",
        precioTotal: 30000,
        sena: 5000,
        linkPago: "https://pago.ejemplo/unas-esculpidas"
      },
      {
        id: "extension_pestanas",
        nombre: "Extensi√≥n de pesta√±as",
        desc: "Volumen, curva y definici√≥n sin m√°scara.",
        duracion: "75 min",
        profesional: "Sofi",
        precioTotal: 35000,
        sena: 6000,
        linkPago: "https://pago.ejemplo/extension-pestanas"
      },
      {
        id: "lifting_pestanas_cejas",
        nombre: "Lifting Pesta√±as y Cejas",
        desc: "Levanta y ordena tu mirada de forma natural.",
        duracion: "50 min",
        profesional: "Sofi",
        precioTotal: 22000,
        sena: 4000,
        linkPago: "https://pago.ejemplo/lifting"
      },
      {
        id: "microblading",
        nombre: "Microblading",
        desc: "Cejas con forma y relleno efecto make-up 24/7.",
        duracion: "90 min",
        profesional: "Belu",
        precioTotal: 50000,
        sena: 10000,
        linkPago: "https://pago.ejemplo/microblading"
      },
      {
        id: "belleza_pies",
        nombre: "Belleza de pies",
        desc: "Limpieza, forma, cut√≠culas y esmaltado impecable.",
        duracion: "45 min",
        profesional: "Carla",
        precioTotal: 18000,
        sena: 3000,
        linkPago: "https://pago.ejemplo/belleza-pies"
      },
      {
        id: "depilacion_definitiva",
        nombre: "Depilaci√≥n definitiva",
        desc: "Piel suave y sin vello. Sesiones r√°pidas, resultado duradero.",
        duracion: "30 min",
        profesional: "Lau",
        precioTotal: 26000,
        sena: 5000,
        linkPago: "https://pago.ejemplo/depilacion-definitiva"
      }
    ];

    // horarios dummy
    const horariosDisponibles = ["10:00", "11:30", "14:00", "15:30", "17:00"];

    const state = {
      servicioId: null,
      fecha: "",
      hora: "",
      nombre: "",
      tel: ""
    };

    function $(id){ return document.getElementById(id); }

    function setStep(activeStep) {
      $("step1_services").classList.add("hidden");
      $("step2_datetime").classList.add("hidden");
      $("step3_client").classList.add("hidden");
      $("step4_done").classList.add("hidden");

      if (activeStep === 1) {
        $("step1_services").classList.remove("hidden");
        $("flowTitleText").textContent = "Paso 1 ¬∑ Eleg√≠ tu servicio";
      }
      if (activeStep === 2) {
        $("step2_datetime").classList.remove("hidden");
        $("flowTitleText").textContent = "Paso 2 ¬∑ Eleg√≠ la fecha y el horario";
      }
      if (activeStep === 3) {
        $("step3_client").classList.remove("hidden");
        $("flowTitleText").textContent = "Paso 3 ¬∑ Tus datos de contacto";
      }
      if (activeStep === 4) {
        $("step4_done").classList.remove("hidden");
        $("flowTitleText").textContent = "Listo üíñ Pag√° tu se√±a para confirmar";
      }

      document.querySelectorAll(".step-dot").forEach((dot, index) => {
        if (index < activeStep) {
          dot.classList.add("active");
        } else {
          dot.classList.remove("active");
        }
      });
    }

    function getServicioSel() {
      return servicios.find(s => s.id === state.servicioId);
    }

    function formatearPrecio(num) {
      return "$ " + num.toLocaleString("es-AR");
    }

    function syncSidePanel() {
      const srv = getServicioSel();
      $("liveServicio").textContent = srv ? srv.nombre : "‚Äî";
      $("livePro").textContent = srv ? srv.profesional : "‚Äî";
      $("liveSena").textContent = srv ? formatearPrecio(srv.sena) : "‚Äî";
      $("liveFecha").textContent = state.fecha || "‚Äî";
      $("liveHora").textContent = state.hora || "‚Äî";
      $("liveNombre").textContent = state.nombre || "‚Äî";
      $("liveTel").textContent = state.tel || "‚Äî";
    }

    function renderPaso4() {
      const srv = getServicioSel();
      if (!srv) return;
      $("sumServicio").textContent = srv.nombre;
      $("sumPro").textContent = srv.profesional;
      $("sumFechaHora").textContent = `${state.fecha} ${state.hora}`;
      $("sumNombre").textContent = state.nombre;
      $("sumTel").textContent = state.tel;
      $("sumSena").textContent = formatearPrecio(srv.sena);
      $("payBtn").setAttribute("href", srv.linkPago);

      const msg = [
        `Hola ${state.nombre} üíï`,
        `Tu turno qued√≥ reservado en Boutique Sal√≥n:`,
        `‚Ä¢ Servicio: ${srv.nombre}`,
        `‚Ä¢ Profesional: ${srv.profesional}`,
        `‚Ä¢ D√≠a y hora: ${state.fecha} ${state.hora}`,
        ``,
        `Para confirmarlo necesit√°s abonar la se√±a de ${formatearPrecio(srv.sena)}:`,
        srv.linkPago,
        ``,
        `Pod√©s pagar por Mercado Pago / Ual√° / Brubank / Naranja.`,
        ``,
        `IMPORTANTE: si la se√±a no se acredita pronto, el turno se libera autom√°ticamente.`,
        `Gracias por elegirnos ü©∑`
      ].join("\n");

      $("waPreview").textContent = msg;
    }

    function renderServicios() {
      const cont = $("servicesGrid");
      cont.innerHTML = "";
      servicios.forEach(srv => {
        const card = document.createElement("div");
        card.className = "service-card";
        card.innerHTML = `
          <div class="service-header-row">
            <div class="service-name">${srv.nombre}</div>
            <div class="badge-price">${formatearPrecio(srv.precioTotal)}</div>
          </div>

          <div class="service-desc">${srv.desc}</div>

          <div class="service-meta-row">
            <div><span class="mini-label">${srv.duracion}</span> aprox</div>
            <div>Se√±a ${formatearPrecio(srv.sena)}</div>
          </div>

          <button class="choose-btn" data-id="${srv.id}">
            Elegir este servicio
          </button>
        `;
        cont.appendChild(card);
      });

      cont.querySelectorAll(".choose-btn").forEach(btn => {
        btn.addEventListener("click", e => {
          const idSel = e.currentTarget.getAttribute("data-id");
          state.servicioId = idSel;
          state.fecha = "";
          state.hora = "";
          syncSidePanel();

          const srv = getServicioSel();
          $("chosenServiceLabel").textContent = srv ? srv.nombre : "";

          renderHorarios();
          $("dateInput").value = "";
          setStep(2);
        });
      });
    }

    function renderHorarios() {
      const wrap = $("timesGrid");
      wrap.innerHTML = "";
      horariosDisponibles.forEach(h => {
        const b = document.createElement("button");
        b.className = "time-slot-btn";
        b.textContent = h;
        b.addEventListener("click", () => {
          document.querySelectorAll(".time-slot-btn").forEach(x => x.classList.remove("active"));
          b.classList.add("active");

          state.hora = h;
          syncSidePanel();

          if (state.fecha) {
            setStep(3);
          }
        });
        wrap.appendChild(b);
      });
    }

    $("dateInput").addEventListener("change", (e)=>{
      state.fecha = e.target.value;
      syncSidePanel();
      if (state.hora) {
        setStep(3);
      }
    });

    $("btnConfirmClient").addEventListener("click", ()=>{
      const nombre = $("clientName").value.trim();
      const tel = $("clientPhone").value.trim();

      state.nombre = nombre || state.nombre;
      state.tel = tel || state.tel;

      syncSidePanel();
      renderPaso4();
      setStep(4);
    });

    renderServicios();
    renderHorarios();
    syncSidePanel();
    setStep(1);
  </script>
</body>
</html>
